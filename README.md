# はじめに
OpenSSL を利用しているプログラムにおいて、
SSL/TLS接続で生成された秘密鍵を指定ファイルに出力します。

Wireshark などに読み込むことにより、
暗号化パケットが解読されたパケットを追加表示できるようになります。

# OpenSSL によるサポート
こんなファイルなくても、OpenSSL が対応しているのでは？
確かに、2025年4月 Version 3.5 には、SSLKEYLOGFILE 環境変数がサポートされ、
本環境変数を指定することで、秘密鍵を指定されたファイルに出力可能です。
ただし、OpenSSL をビルドする際に、enable-sslkeylog を有効にしておく必要があります。

そのため、既存の OpenSSL バイナリを改変したくない、あるいは困難な場合、
本ファイルを利用することが可能かと思います。

# ビルド方法
基本的なビルド環境がそろっていれば、次のコマンドでビルド可能です。
```
make
```
必要に応じて、適宜 Makefile を修正ください。


# 利用方法
target : 暗号化された通信を見たい対象アプリケーション

```
# root 権限で以下実行する。
export LD_PRELOAD=./libsslkeylog.so
export SSLKEYLOGFILE=./sslkey.log
<対象アプリケーションを実行>
```

実行後、SSLKEYLOGFILE 環境変数で指定したファイル名 (sslkey.log) のファイルが生成されます。
生成されたファイルを Wireshark などに読み込むと
解読されたパケットが追加表示されます。
